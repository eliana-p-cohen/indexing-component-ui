(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{D6S8:function(e,t,i){"use strict";i.r(t),i.d(t,"QcFeedbackModule",(function(){return _}));var s=i("Ip0R"),c=i("PCNd"),r=i("ZYCi"),n=i("mrSG"),a=i("V6MO"),o=i("dkQB"),l=i("feID"),u=i("IJgu"),b=i("/JDm"),h=i("ZPvC"),f=i("JK6L"),d=i("CcnG"),p=i("ZYjt"),m=i("NSWw"),g=i("VkHG"),S=i("Xv+k");function v(e,t){if(1&e){var i=d.Yb();d.Xb(0,"div"),d.Xb(1,"app-table",5),d.fc("pager",(function(e){return d.zc(i),d.jc(2).pager(e)}))("checkbox",(function(e){return d.zc(i),d.jc(2).onCheckboxChecked(e)})),d.Wb(),d.Wb()}if(2&e){var s=d.jc(2);d.Cb(1),d.qc("tableData",s.dataSource)("sortingColumns",s.sortingColumns)("isHighlightRow",!1)("showPagination",!0)("pagerData",s.pagerData)("tableColumns",s.displayedColumns)}}function k(e,t){if(1&e){var i=d.Yb();d.Xb(0,"section"),d.Xb(1,"h1"),d.Jc(2),d.Wb(),d.Xb(3,"section"),d.Sb(4,"app-dynamic-form",1),d.Xb(5,"div"),d.Xb(6,"app-button",2),d.fc("btnClick",(function(){return d.zc(i),d.jc().onSearch("SEARCH")})),d.Wb(),d.Wb(),d.Wb(),d.Hc(7,v,2,6,"div",3),d.Xb(8,"div"),d.Xb(9,"app-button",4),d.fc("btnClick",(function(e){return d.zc(i),d.jc().onShow(e)})),d.Wb(),d.Wb(),d.Wb()}if(2&e){var s=d.jc();d.Fb("",s.classPrefix,"-search-trademark"),d.Cb(1),d.Fb("",s.classPrefix,"-title"),d.Cb(1),d.Kc(s.title),d.Cb(1),d.Hb("",s.classPrefix,"-wrapper ",s.classPrefix,"-search-trademark-form ",s.classPrefix,"-form-md"),d.Cb(1),d.qc("questions",s.formData),d.Cb(1),d.Fb("",s.classPrefix,"-form-buttons"),d.Cb(1),d.qc("label",s.buttonsLabels.SEARCH.LABEL)("isLoading",s.buttonsLabels.SEARCH.LOADING),d.Cb(1),d.qc("ngIf",null==s.dataSource?null:s.dataSource.length),d.Cb(1),d.Fb("",s.classPrefix,"-form-buttons"),d.Cb(1),d.qc("label",s.buttonsLabels.SHOW.LABEL)("isDisabled",s.isDisabled)}}var C=[{path:"",component:function(){function e(e,t,i,s,c,r,n){this._qcFeedbackService=e,this._dialogService=t,this._sharedService=i,this._loaderService=s,this._titleService=c,this._router=r,this._editorialService=n,this.title=o.G.QC_FEEDBACK,this.buttonsLabels=o.e,this.classPrefix=o.f,this.checkedRow={},this.pagerData={},this.submitted=!1,this.isDisabled=!0,this._clickedButton="",this.displayedColumns=[{columnDef:"analystName",header:"Analyst",cell:function(e){return""+e.analystName}},{columnDef:"qcAnalyst",header:"QC Analyst",cell:function(e){return""+e.qcAnalyst}},{columnDef:"taskType",header:"Task Title",cell:function(e){return""+e.taskType}},{columnDef:"trademarkName",header:"TM Name",cell:function(e){return""+e.trademarkName}},{columnDef:"qcScore",header:"Score",cell:function(e){return o.T[e.attribute.toUpperCase()]+" "+e.qcScore}},{columnDef:"Select",header:"Select All",cell:function(e){return""}}],this.sortingColumns=["Score"]}return e.prototype.ngOnInit=function(){var e=this;localStorage.removeItem("taskDetails"),this._analystsSubscription=this._qcFeedbackService.getAnalysts("cipo").subscribe((function(t){var i=e._qcFeedbackService.getFormFields(t||[]),s=e._qcFeedbackService.getFilter();s&&i.field.map((function(e){if("from"===e.key||"to"===e.key){var t=s[e.key];e.value=t.substring(0,4)+"-"+t.substring(4,6)+"-"+t.substring(6,8)}else e.value=s[e.key]})),e.formData1=i,console.log("filter",e.formData1)})),this.formObjectSubscription=this._sharedService.$formObjectBehaviorSubject.subscribe((function(t){return e.formObj=t})),this._loadingSubscription=this._loaderService.isLoading.subscribe((function(t){e._clickedButton&&(e.buttonsLabels[e._clickedButton].LOADING=t)})),this._qcAnalystSubscription=this._qcFeedbackService.getQcAnalysts().subscribe((function(t){var i,s=[];t.forEach((function(e){s.push({value:e.userid,label:e.first_name+" "+e.last_name})})),null===(i=e.formData1)||void 0===i||i.field.map((function(e){"qcAnalystIds"===e.key&&(e.options=s)})),e.formData=e.formData1})),this._titleService.setTitle(this.title)},e.prototype.onSearch=function(e){this._clickedButton=e;var t=this.formObj.controls.report;if(this.submitted=!0,t.submitted=this.submitted,t.invalid){var i=new u.b("Confirm",o.fb.QC_FEEDBACK_CONFIRMATION_MSG,"","OK");this._dialogService.open(i,u.a)}else this.searchResults(1)},e.prototype.searchResults=function(e){var t=this,i=this.formObj.controls.report.value;this._qcFeedbackService.setFilter(i),Object.entries(i).forEach((function(e){var s=e[0],c=e[1];i[s]="from"!==s&&"to"!==s||!c?c:t._sharedService.UTCtoFormat(c)})),i.analystIds=i.analystIds.length?i.analystIds:this._qcFeedbackService.assignAnalyst();var s=i,c={filter:Object(n.a)({},s),currentPage:e,pageSize:o.F};this._qcSearchResultSubscription=this._qcFeedbackService.feedbackSearchResults(c).subscribe((function(i){var s;t.dataSource=i.result,t.pagerData=((s={}).totalItems=parseInt(i.total,10),s.currentPage=parseInt(e,10),s.pageSize=o.F,s.totalPages=parseInt(i.totalPages,10),s)}),(function(e){return console.log(e)}))},e.prototype.pager=function(e){this.searchResults(e.currentPage)},e.prototype.onCheckboxChecked=function(e){this.checkedRow=e,this.isDisabled=!Object.keys(this.checkedRow).length||!this.checkedRow.selected.length},e.prototype.onShow=function(e){Object.keys(this.checkedRow).length>0&&(this.checkedRow.selected.map((function(e){return e.selected=!1})),this._qcFeedbackService.selectedTrademarks=this.checkedRow.selected),this._editorialService.register=this.getRegister(),this._router.navigate(["/qc-feedback-summary"])},e.prototype.getRegister=function(){var e,t=this.formObj.controls.report.controls.registers.value;return t.length&&(e="CANA"===t[0].toLowerCase()||"cipo"===t[0].toLowerCase()?"cipo":"uspto"),e},e.prototype.ngOnDestroy=function(){var e;this.formObjectSubscription.unsubscribe(),this._loadingSubscription.unsubscribe(),null===(e=this._qcSearchResultSubscription)||void 0===e||e.unsubscribe(),this._analystsSubscription.unsubscribe(),this._qcAnalystSubscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(d.Rb(l.a),d.Rb(b.a),d.Rb(h.a),d.Rb(f.a),d.Rb(p.d),d.Rb(r.b),d.Rb(a.a))},e.\u0275cmp=d.Lb({type:e,selectors:[["app-qc-feedback"]],decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[3,"questions"],[3,"label","isLoading","btnClick"],[4,"ngIf"],[3,"label","isDisabled","btnClick"],[3,"tableData","sortingColumns","isHighlightRow","showPagination","pagerData","tableColumns","pager","checkbox"]],template:function(e,t){1&e&&d.Hc(0,k,10,24,"section",0),2&e&&d.qc("ngIf",t.formData)},directives:[s.t,m.a,g.a,S.a],styles:[""]}),e}()}],y=function(){function e(){}return e.\u0275mod=d.Pb({type:e}),e.\u0275inj=d.Ob({factory:function(t){return new(t||e)},imports:[[r.f.forChild(C)],r.f]}),e}(),_=function(){function e(){}return e.\u0275mod=d.Pb({type:e}),e.\u0275inj=d.Ob({factory:function(t){return new(t||e)},imports:[[s.c,c.a,y]]}),e}()}}]);